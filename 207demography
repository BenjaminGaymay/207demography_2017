#!/usr/bin/env python3

import sys
import csv
from pprint import pprint


def load_csv(filename):
	datas = []
	with open(filename, 'r') as csv_file:
		csv_reader = csv.reader(csv_file, delimiter=';')
		next(csv_reader)
		for row in csv_reader:
			datas.append(row)
	return datas


def usage():
	print("""USAGE
	./207demography code1 [...]
DESCRIPTION
	code1 country code""")


def calc(row):
	print("country:  {}".format(row[0]))

def main():
	argv = sys.argv
	argv.pop(0)
	if (len(argv) < 1):
		return 84
	elif argv[0] in ['-h', '--help']:
		return usage()
	datas = load_csv("207demography_data.csv")
	countries = []
	for row in datas:
		if len(row) > 2:
			if row[1] in argv:
				countries.append(row)
	print("country:  ", end="")
	for country in countries:
		if country == countries[-1]:
			print(country[0])
		else:
			print("{}, ".format(country[0]), end="")
	return 0

if __name__ == '__main__':
	sys.exit(main())